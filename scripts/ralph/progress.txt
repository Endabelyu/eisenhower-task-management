# Ralph Progress Log
Started: 2026-02-22
Feature: Eisenhower Matrix - Complete Missing Features
Parent Task: 1

## Codebase Patterns
- React + Vite + TypeScript + shadcn/ui + Tailwind CSS
- State management: React Context + custom hooks (useTasks), persisted to localStorage
- Routing: react-router-dom v6 with BrowserRouter
- Drag-and-drop: @dnd-kit/core + @dnd-kit/sortable
- UI components: shadcn/ui (Radix-based) in src/components/ui/
- Task types: src/types/task.ts (Task, TaskWithMetrics, Quadrant, QUADRANT_CONFIG)
- Context: src/context/TaskContext.tsx wraps useTasks hook
- Pages follow pattern: max-w container, icon + heading, muted description
- Dark mode: CSS variables in index.css (.dark class), tailwind darkMode: ["class"]
- next-themes is installed but not yet used
- recharts is installed but not yet used
- sonner toast is rendered in App.tsx but never triggered
- AlertDialog component available at src/components/ui/alert-dialog.tsx
- Tests: vitest + @testing-library/react, setup in src/test/setup.ts
---

## 2026-02-22 - Fix performance: add useMemo to useTasks hook
Task ID: 2
- Added useMemo to tasksWithMetrics computation
- Fixed order assignment bug (max order + 1 instead of length)
- Memoized return object
- Added parseInt radix parameter in EditTaskModal and QuickAddModal
---

## 2026-02-22 - Fix accessibility: add aria-labels and keyboard navigation
Task ID: 3
- Added aria-label to drag handle button in TaskCard.tsx
- Added dynamic aria-label to completion toggle button in TaskCard.tsx
- Added group-focus-within:opacity-100 to delete button container in TaskCard.tsx for keyboard access
- Added aria-label="Delete task" to delete button in TaskCard.tsx
- Added role="button", tabIndex={0}, and onKeyDown handler to clickable div in TaskList.tsx
- Added aria-label="Complete task" and aria-label="Delete task" to action buttons in TaskList.tsx
- Added group-focus-within:opacity-100 to action buttons container in TaskList.tsx
- Added role="button", tabIndex={0}, and onKeyDown handler to clickable div in DailyFocus.tsx
- Files changed: src/components/TaskCard.tsx, src/pages/TaskList.tsx, src/pages/DailyFocus.tsx
---

## 2026-02-22 - Add dark mode toggle to sidebar
Task ID: 4
- Wrapped App with next-themes ThemeProvider (attribute="class", defaultTheme="system", enableSystem)
- Added dark mode toggle button in SidebarFooter in AppSidebar.tsx
- Toggle cycles: light → dark → system
- Shows Moon/Sun icon and current theme label
- Files changed: src/App.tsx, src/components/AppSidebar.tsx
---

## 2026-02-22 - Add toast notifications on task actions
Task ID: 5
- Added sonner toast.success on addTask with quadrant label
- Added toast.success on task completion with emoji
- Added toast with Undo action on deleteTask (re-adds deleted task)
- Added toast on moveToQuadrant with quadrant label
- Files changed: src/hooks/use-tasks.ts
---

## 2026-02-22 - Add delete confirmation dialog
Task ID: 6
- Wrapped delete button in AlertDialog in TaskCard.tsx
- Wrapped delete button in AlertDialog in TaskList.tsx
- Both show task title in confirmation message
- stopPropagation on trigger/content to prevent row click-through
- Files changed: src/components/TaskCard.tsx, src/pages/TaskList.tsx
---

## 2026-02-22 - Add recharts visualizations to Stats page
Task ID: 7
- Added PieChart (donut) for quadrant distribution with matching colors
- Added BarChart for completed vs pending per quadrant
- Charts only render when total > 0
- Responsive with tooltips
- Files changed: src/pages/Stats.tsx
---

## 2026-02-22 - Add Export/Import functionality
Task ID: 8
- Added exportTasks (downloads dated JSON), importTasks (validates + replaces), clearAllTasks to use-tasks.ts
- Created DataManagement.tsx component with Export/Import/Clear buttons
- Clear All uses AlertDialog confirmation
- Files changed: src/hooks/use-tasks.ts, src/components/DataManagement.tsx (new)
---

## 2026-02-22 - Add Settings page
Task ID: 9
- Created Settings.tsx with Data Management section using DataManagement component
- Added /settings route to App.tsx
- Added Settings nav item to AppSidebar.tsx
- Files changed: src/pages/Settings.tsx (new), src/App.tsx, src/components/AppSidebar.tsx
---

## 2026-02-23 - Add task tags/labels system
Thread: https://ampcode.com/threads/T-019c8643-f6d0-702b-97f7-319126f6b1ef
Task ID: 10
- Added tag selection UI to Quick Add and Edit modals with multi-select toggle chips
- Persisted selected tags on create/update and reset quick-add tags after successful submit
- Displayed task tags as color-coded badges on TaskCard using PRESET_TAGS metadata
- Added tag filter dropdown to TaskList, combined with search and quadrant filtering
- Verified with `npx tsc --noEmit` and `npm run test -- --run`
- Files changed: src/components/QuickAddModal.tsx, src/components/EditTaskModal.tsx, src/components/TaskCard.tsx, src/pages/TaskList.tsx, src/hooks/use-tasks.ts, src/types/task.ts
- **Learnings for future iterations:**
  - Keeping tag styles centralized in `PRESET_TAGS` makes add/edit/list/card UI stay visually consistent
  - Backward-compatible `loadTasks` mapping avoids breaking existing localStorage task data when new fields are introduced
---

## 2026-02-23 - Add keyboard shortcuts
Thread: https://ampcode.com/threads/T-019c8643-f6d0-702b-97f7-319126f6b1ef
Task ID: 11
- Added global `useKeyboardShortcuts` hook with guarded hotkeys (`Ctrl+N`, `Ctrl+/`, `1-4`)
- Implemented editable-target detection to avoid triggering shortcuts while typing in inputs
- Added `KeyboardShortcutsDialog` and wired it into the app header for discoverability
- Centralized quick-add modal in `Layout` and routed dashboard Add Task button through `app:open-quick-add`
- Verified with `npx tsc --noEmit` and `npm run test -- --run`
- Files changed: src/hooks/use-keyboard-shortcuts.ts (new), src/components/KeyboardShortcutsDialog.tsx (new), src/components/Layout.tsx, src/pages/Index.tsx
- **Learnings for future iterations:**
  - Global modals are easier to reuse when triggered by both shortcut handlers and lightweight window events
  - Input-guard logic in keyboard hooks prevents accidental navigation or dialog opening during form entry
---

## 2026-02-23 - Add unit tests for use-tasks hook and task types
Thread: https://ampcode.com/threads/T-019c8643-f6d0-702b-97f7-319126f6b1ef
Task ID: 12
- Added `task-types.test.ts` covering quadrant helpers and preset tags
- Added `use-tasks.test.ts` with CRUD, ordering, import/export validation, stats, and metrics behavior checks
- Added 26 new assertions across the two new test files (27 total including existing example test)
- Verified with `npx tsc --noEmit` and `npm run test -- --run`
- Files changed: src/test/task-types.test.ts (new), src/test/use-tasks.test.ts (new)
- **Learnings for future iterations:**
  - `renderHook` from `@testing-library/react` works well for stateful hook verification without extra wrappers in this project
  - `vi.hoisted` mock setup keeps `sonner` toast assertions stable across test runs
---

## 2026-02-23 - Enhanced Daily Focus with time budget and Pomodoro timer
Thread: https://ampcode.com/threads/T-019c8643-f6d0-702b-97f7-319126f6b1ef
Task ID: 13
- Added `PomodoroTimer` component with 25-minute focus and 5-minute break sessions, start/pause/reset controls
- Updated Daily Focus to sort priorities across all quadrants and support configurable focus count (Top 3/5/8/10)
- Added time budget summary card using total estimated minutes from the active focus set
- Added quadrant context badges in focus cards and integrated Pomodoro section into the page layout
- Verified with `npx tsc --noEmit` and `npm run test -- --run`
- Files changed: src/components/PomodoroTimer.tsx (new), src/pages/DailyFocus.tsx
- **Learnings for future iterations:**
  - Keeping focus ranking based on existing `urgencyScore` reuses established prioritization logic without new state complexity
  - Timer session switching is simpler to reason about when mode reset and countdown reset are centralized in one helper
---
